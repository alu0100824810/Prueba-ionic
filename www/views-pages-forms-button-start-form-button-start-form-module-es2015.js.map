{"version":3,"sources":["./src/app/views/pages/forms/button-start-form/button-start-form.page.html","./src/app/views/pages/forms/button-start-form/button-start-form.module.ts","./src/app/views/pages/forms/button-start-form/button-start-form.page.scss","./src/app/views/pages/forms/button-start-form/button-start-form.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,wJAAyF,sBAAsB,kbAAkb,E;;;;;;;;;;;;;;;;;;;;;ACAvgB;AACM;AACQ;AACC;AACO;AAE/D,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,2EAAmB;KAC/B;CACF,CAAC;IAUW,yBAAyB,SAAzB,yBAAyB;CAAG;AAA5B,yBAAyB;IARrC,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,qEAAY;YACZ,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;SAC9B;QACD,YAAY,EAAE,CAAC,2EAAmB,CAAC;KACpC,CAAC;GACW,yBAAyB,CAAG;AAAH;;;;;;;;;;;;;ACrBtC;AAAe,+EAAgB,kBAAkB,wBAAwB,4BAA4B,iBAAiB,GAAG,4BAA4B,2CAA2C,6CAA6C,GAAG,6CAA6C,2uBAA2uB,E;;;;;;;;;;;;;;;;;;;;;;;ACA38B;AACZ;AACe;AACE;AACO;AAEb;AAEM;IAQrD,mBAAmB,SAAnB,mBAAmB;IAW9B,YACmB,cAA8B,EACxC,eAAgC,EAC/B,QAAyB,EACzB,kBAAsC,EACtC,OAAsB,EACb,YAA0B;QAL1B,mBAAc,GAAd,cAAc,CAAgB;QACxC,oBAAe,GAAf,eAAe,CAAiB;QAC/B,aAAQ,GAAR,QAAQ,CAAiB;QACzB,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,YAAO,GAAP,OAAO,CAAe;QACb,iBAAY,GAAZ,YAAY,CAAc;QAf7C,gBAAW,GAAG;YACZ,QAAQ,EAAE,EAAE;YACZ,SAAS,EAAE,EAAE;YACb,GAAG,EAAE,EAAE;YACP,IAAI,EAAE,IAAI;SACX,CAAC;QAYA,IAAI,CAAC,SAAS,EAAE,CAAC;IAClB,CAAC;IAEF,QAAQ,KAAI,CAAC;IAEP,SAAS;;YACb,IAAI;gBACF,MAAM,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;gBAClC,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG,uFAAe,EAAE,CAAC;gBAC/C,IAAI,CAAC,WAAW,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC;gBACzE,IAAI,CAAC,WAAW,CAAC,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC;gBAClD,IAAI,MAAM,GAAG,MAAM,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,uFAAe,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;gBAC3H,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,SAAS,CAAE,CAAO,GAAQ,EAAE,EAAE,CAAC;oBAClD,MAAM,CAAC,GAAc,MAAM,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;oBAC9C,IAAI,CAAC,WAAW,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;oBACpC,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE;wBACzB,MAAM,IAAI,CAAC,SAAS,CAAC,qCAAqC,EAAE,OAAO,CAAC,CAAC;qBACrE;oBACF,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;gBAC3B,CAAC,EAAC,CAAC;aACJ;YAAC,OAAO,KAAK,EAAE;gBACd,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBACrB,MAAM,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;gBAClC,MAAM,IAAI,CAAC,SAAS,CAAC,2BAA2B,EAAE,OAAO,CAAC,CAAC;aAC5D;oBAAS;gBACR,MAAM,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;aACnC;QAEH,CAAC;KAAA;IAGD;;;OAGG;IACG,SAAS,CAAC,OAAe,EAAE,MAAc;;YAC7C,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC9C,QAAQ,EAAE,aAAa;gBACvB,MAAM;gBACN,OAAO;gBACP,eAAe,EAAE,KAAK;gBACtB,OAAO,EAAE;oBACP;wBACE,IAAI,EAAE,OAAO;wBACb,QAAQ,EAAE,WAAW;wBACrB,OAAO,EAAE,GAAG,EAAE;4BACZ,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;wBACtB,CAAC;qBACF;iBACF;aACF,CAAC,CAAC;YACH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QACxB,CAAC;KAAA;IAED,WAAW;QACT,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;IAC5B,CAAC;CAEF;;YA5FQ,8DAAc;YACd,8DAAe;YACf,+EAAe;YACf,sFAAkB;YAFD,4DAAa;YAI9B,yEAAY;;AAUR,mBAAmB;IAL/B,+DAAS,CAAC;QACT,QAAQ,EAAE,uBAAuB;QACjC,uQAA4C;;KAE7C,CAAC;mFAamC,8DAAc;QACvB,8DAAe;QACrB,+EAAe;QACL,sFAAkB;QAC7B,4DAAa;QACC,yEAAY;GAjBlC,mBAAmB,CA6E/B;AA7E+B","file":"views-pages-forms-button-start-form-button-start-form-module-es2015.js","sourcesContent":["export default \"<app-header class=\\\"ion-text-capitalize\\\" [showBackButton]=\\\"false\\\" name=\\\"Categoria {{infoService.category}}\\\">\\n  <ion-buttons start>\\n    <ion-back-button defaultHref=\\\"/category-forms\\\" text=\\\"\\\" icon=\\\"chevron-back-outline\\\"></ion-back-button>\\n  </ion-buttons>\\n</app-header>\\n\\n<ion-content>\\n  <div class=\\\"button-start\\\" *ngIf=\\\"!infoService.done\\\">\\n    <ion-button expand=\\\"block\\\" fill=\\\"outline\\\" shape=\\\"round\\\" size=\\\"large\\\" [routerLink]=\\\"['./fill-out']\\\">\\n      Empezar encuesta\\n    </ion-button>\\n  </div>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Routes } from '@angular/router';\nimport { SharedModule } from 'app/shared/shared.module';\nimport { ButtonStartFormPage } from './button-start-form.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ButtonStartFormPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SharedModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ButtonStartFormPage]\n})\nexport class ButtonStartFormPageModule {}\n","export default \".button-start {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  height: 100%;\\n}\\n.button-start ion-button {\\n  --background: var(--ion-color-primary);\\n  color: var(--ion-color-primary-contrast);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvcGFnZXMvZm9ybXMvYnV0dG9uLXN0YXJ0LWZvcm0vYnV0dG9uLXN0YXJ0LWZvcm0ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksYUFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7RUFDQSxZQUFBO0FBQ0o7QUFDSTtFQUNJLHNDQUFBO0VBQ0Esd0NBQUE7QUFDUiIsImZpbGUiOiJzcmMvYXBwL3ZpZXdzL3BhZ2VzL2Zvcm1zL2J1dHRvbi1zdGFydC1mb3JtL2J1dHRvbi1zdGFydC1mb3JtLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5idXR0b24tc3RhcnR7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGhlaWdodDogMTAwJTtcblxuICAgIGlvbi1idXR0b24ge1xuICAgICAgICAtLWJhY2tncm91bmQ6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5KTtcbiAgICAgICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LWNvbnRyYXN0ICk7XG4gICAgfVxufSJdfQ== */\";","import { Component, OnInit , OnDestroy} from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { AlertController, NavController } from '@ionic/angular';\nimport { MessagesService } from '@core/services/messages.service';\nimport { FirebaseAppService } from '@core/services/firebase-app.service';\nimport { FormInfo } from 'app/shared/models/FormModel';\nimport { LoginService } from '@core/services/login.service';\nimport { Observable } from 'rxjs';\nimport { generateDateNow } from 'app/shared/utils/functionsUtils';\n\n\n@Component({\n  selector: 'app-button-start-form',\n  templateUrl: './button-start-form.page.html',\n  styleUrls: ['./button-start-form.page.scss'],\n})\nexport class ButtonStartFormPage implements OnInit , OnDestroy {\n\n  infoService = {\n    category: '',\n    dateToday: '',\n    uid: '',\n    done: null,\n  };\n\n  result: any; // TODO: CAMBIAR NOMBRE\n\n  constructor(\n    private readonly activatedRoute: ActivatedRoute,\n    public alertController: AlertController,\n    private messages: MessagesService,\n    private firebaseAppService: FirebaseAppService,\n    private navCtrl: NavController,\n    private readonly loginService: LoginService,\n  ) {\n    this.checkForm();\n   }\n\n  ngOnInit() {}\n\n  async checkForm() {\n    try {\n      await this.messages.showSpinner();\n      this.infoService.dateToday = generateDateNow();\n      this.infoService.category = this.activatedRoute.snapshot.params.category;\n      this.infoService.uid = this.loginService.user.uid;\n      let prueba = await this.firebaseAppService.getFormByID(this.infoService.category, generateDateNow(), this.infoService.uid);\n      this.result = prueba.subscribe( async (res: any) => {\n        const r: FormInfo =  await res.payload.data();\n        this.infoService.done = r.info.done;\n        if (this.infoService.done) {\n          await this.showAlert('Esta encuesta ya ha sido realizada.', 'Aviso');\n         }\n        await this.ngOnDestroy();\n      });\n    } catch (error) {\n      console.error(error);\n      await this.messages.hideSpinner();\n      await this.showAlert('Se ha producido un error.', 'Error');\n    } finally {\n      await this.messages.hideSpinner();\n    }\n\n  }\n\n\n  /**\n   * Mostrar mensaje de error\n   * @param message mensaje de error\n   */\n  async showAlert(message: string, header: string) {\n    const alert = await this.alertController.create({\n      cssClass: 'alert-error',\n      header,\n      message,\n      backdropDismiss: false,\n      buttons: [\n        {\n          text: 'AtrÃ¡s',\n          cssClass: 'secondary',\n          handler: () => {\n            this.navCtrl.back();\n          }\n        }\n      ]\n    });\n    await alert.present();\n  }\n\n  ngOnDestroy() {\n    this.result.unsubscribe();\n  }\n\n}\n"],"sourceRoot":"webpack:///"}