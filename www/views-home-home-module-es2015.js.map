{"version":3,"sources":["./src/app/views/home/home.page.html","./src/app/core/services/beacons.service.ts","./src/app/core/services/localNotification.service.ts","./src/app/core/services/modal.service.ts","./src/app/views/home/home.module.ts","./src/app/views/home/home.page.scss","./src/app/views/home/home.page.ts"],"names":[],"mappings":"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","file":"views-home-home-module-es2015.js","sourcesContent":["export default \"\\n<app-sidebar-menu #menu></app-sidebar-menu>\\n\\n<ion-tabs>\\n  <ion-tab-bar slot=\\\"bottom\\\">\\n    <ion-tab-button tab=\\\"news\\\">\\n      <fa-icon [icon]=\\\"icons.newspaper\\\"></fa-icon>\\n      <ion-label>Noticias</ion-label>\\n    </ion-tab-button>\\n\\n    <ion-tab-button tab=\\\"matches\\\">\\n      <fa-icon [icon]=\\\"icons.matches\\\"></fa-icon>\\n      <ion-label>Partidos</ion-label>\\n    </ion-tab-button>\\n\\n    <ion-tab-button tab=\\\"team\\\">\\n      <fa-icon [icon]=\\\"icons.team\\\"></fa-icon>\\n      <ion-label>Equipo</ion-label>\\n    </ion-tab-button>\\n\\n    <ion-tab-button (click)=\\\"openSideBar()\\\">\\n      <fa-icon [icon]=\\\"icons.more\\\"></fa-icon>\\n      <ion-label>M谩s</ion-label>\\n    </ion-tab-button>\\n  </ion-tab-bar>\\n</ion-tabs>\";","import { Injectable } from '@angular/core';\nimport { IBeacon } from '@ionic-native/ibeacon/ngx';\nimport { Platform } from '@ionic/angular';\nimport { ModalService } from './modal.service';\nimport { BeaconInfo } from '@core/models/iBeaconModel';\nimport { FirebaseAppService } from './firebase-app.service';\nimport { generateRandomNumber, generateDateNow } from 'app/shared/utils/functionsUtils';\nimport { LocalNotificationService } from './localNotification.service';\nimport { DataNotification } from '@core/models/localNotificationModel';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class BeaconsService {\n\n    delegate: any;\n\n    constructor(private ibeacon: IBeacon, public platform: Platform, public readonly modalService: ModalService,\n                private firebaseService: FirebaseAppService,\n                private localNotificationService: LocalNotificationService) { }\n\n\n    /**\n     * * Comprueba si se le permite acceder a localizaci贸n\n     * ! iOS es necesario, en Android no hace falta\n     */\n    isEnabledLocation() {\n        if (this.platform.is('ios' || 'ipad' || 'iphone')) {\n            this.ibeacon.requestAlwaysAuthorization();\n            this.ibeacon.getAuthorizationStatus().then(res => {\n                if (res.authorizationStatus === 'AuthorizationStatusDenied') {\n                    this.modalService.showModal('Aviso', 'La Localizaci贸n est谩 desactivada. Para poder interectuar con los Beacons, es necesario activarla. Por favor, vaya Ajustes > CDTenerife > Localizaci贸n y act铆vela.');\n                }\n            });\n        }\n    }\n\n\n    /**\n     * * Comprueba que el Bluetooth est谩 habilitado\n     */\n    isEnabledBluetooth() {\n        this.ibeacon.isBluetoothEnabled().then(statusBluetooth => {\n            if (!statusBluetooth) {\n                this.modalService.showModal('Aviso', 'El Bluetooth est谩 desactivado. Para poder interectuar con los Beacons, es necesario activarlo. Por favor, vaya Ajustes y act铆velo.');\n            }\n        });\n    }\n\n\n    /**\n     * * Comenzar a buscar beacons\n     * - Crear nuevo delegado y lo registra con la capa activa\n     */\n    startSearchOfBeacons(beacon: BeaconInfo) {\n        this.delegate = this.ibeacon.Delegate();\n        this.controlAuthorizationStatus();\n        this.rangeBeaconsInRegion();\n        this.startMonitoringForRegion();\n        this.enterRegion();\n        const beaconRegion = this.ibeacon.BeaconRegion(beacon.identifier, beacon.uuid, beacon.major, beacon.minor, true);\n        this.startMonitoringRegion(beaconRegion);\n    }\n\n\n    /**\n     * Control del estado de autorizaci贸n, se llamada cada vez q se modifica\n     */\n    controlAuthorizationStatus() {\n        this.delegate.didChangeAuthorizationStatus()\n            .subscribe(\n                data => {\n                    console.log(' didChangeAuthorizationStatus: ', data);\n                    this.isEnabledLocation();\n                },\n                error => console.error(error)\n            );\n    }\n\n\n    /**\n     * Cuando se detecta un beacon cualquiera dentro de la regi贸n.\n     */\n    rangeBeaconsInRegion() {\n        this.delegate.didRangeBeaconsInRegion()\n            .subscribe(\n                data => console.log('  didRangeBeaconsInRegion: ', data), // ! a veces entra y otras veces pasa\n                error => console.error(error)\n            );\n    }\n\n\n    /**\n     * Cuando el dispositivo comienza a monitorear una regi贸n.\n     */\n    startMonitoringForRegion() {\n        this.delegate.didStartMonitoringForRegion()\n            .subscribe(\n                data => console.log('  didStartMonitoringForRegion: ', data),\n                error => console.error(error)\n            );\n    }\n\n\n    /**\n     * * El dispositivo entra en la regi贸n solicit贸 monitorear.\n     */\n    enterRegion() {\n        this.delegate.didEnterRegion()\n            .subscribe(\n                async data => {\n                    console.log('  didEnterRegion: ', data);\n                    await this.sendNotification(data);\n                    // let e = { region : { 'typeName': 'BeaconRegion', 'minor': 1, 'major': 1, 'identifier': 'Beacon Popular-Comida', 'uuid': 'B9407F30-F5F8-466E-AFF9-25556B57FE6D' }, 'eventType': 'didEnterRegion' }\n                }\n            );\n    }\n\n    /**\n     * * Comienza a monitorear una regi贸n especificada.\n     */\n    startMonitoringRegion(beacon: BeaconInfo) {\n        this.ibeacon.startMonitoringForRegion(beacon)\n            .then(\n                () => console.log('   Native layer received the request to monitoring'),\n                error => console.error('Native layer failed to begin monitoring: ', error)\n            );\n    }\n\n\n    /**\n     * * Parar de monitorear una regi贸n especificada.\n     */\n    stopMonitoringRegion(region: BeaconInfo) {\n        this.ibeacon.stopMonitoringForRegion(region);\n    }\n\n\n\n    /**\n     * Enviar notificaci贸n dependiendo del tipo de beacon\n     * @param data datos del beacon\n     */\n    async sendNotification(data: any) {\n        switch (data.region.minor) {\n            case 1:\n                const res1 = await this.firebaseService.getFoodOffer(generateDateNow());\n                this.notifications(res1, 1, true);\n                break;\n            case 2:\n                const res2 = await this.firebaseService.getShopTicketsOffer(generateDateNow());\n                this.notifications(res2, 2, true);\n                break;\n            case 3:\n                await this.firebaseService.getDataContestDrawForNotification(generateDateNow()).then( res => {\n                    res.subscribe(async (d: any) => {\n                      this.localNotificationService.activateListen(d.payload.data(), true, 3);\n                      this.localNotificationService.customButtons(d.payload.data().buttonsNotification);\n                      this.localNotificationService.showNotification(d.payload.data());\n                    });\n                  });\n                break;\n            case 4:\n                const res4 = await this.firebaseService.getPolls(generateDateNow());\n                this.notifications(res4, 4, true);\n                break;\n            default:\n                break;\n        }\n    }\n\n\n    /**\n     * Configuraciones\n     * @param result resultados de las peticiones\n     * @param typeBeacon tipo de beacon\n     * @param firebase uso de firebase, mostra dato en la notificaci贸n de la BBDD\n     */\n    notifications(result: any, typeBeacon: number, firebase: boolean) {\n        let data: Array<DataNotification> = [];\n        result.subscribe(async (d: any) => { // ! OJO: CON EL SUBCRIBE- DESUCRBIBE\n            d.forEach(item => {\n                data.push(item.payload.doc.data());\n            });\n            const num = generateRandomNumber(data.length);\n            this.localNotificationService.activateListen(data[num], true, typeBeacon);\n            this.localNotificationService.customButtons(data[num].buttonsNotification);\n            this.localNotificationService.showNotification(data[num]);\n        });\n    }\n\n\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { ButtonsNotification, DataNotification } from '@core/models/localNotificationModel';\nimport { Plugins, LocalNotification, LocalNotificationActionPerformed } from '@capacitor/core';\nimport { FirebaseAppService } from './firebase-app.service';\nconst { LocalNotifications } = Plugins;\n\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class LocalNotificationService {\n\n\n    constructor(private firebaseAppService: FirebaseAppService) { }\n\n\n    /**\n     *  Solicitar permiso de notificaciones\n     * ! Revisar en Android\n     */\n    async isEnabledNotifications() {\n        await LocalNotifications.requestPermission();\n    }\n\n    /**\n     * Crear botones personalizados.\n     * @param buttonsData datos de los botones\n     */\n    customButtons(buttonsData: ButtonsNotification) {\n        LocalNotifications.registerActionTypes(buttonsData);\n    }\n\n\n    /**\n     * Activar escucha (Listen)\n     * @param firebase si va hacer una petici贸n a la BBDD\n     * @param data datos\n     */\n    activateListen(data: any, firebase: boolean, type: number) {\n        LocalNotifications.addListener('localNotificationActionPerformed', (notification: LocalNotificationActionPerformed) => {\n            console.log('Pulsar: ', notification.actionId);\n\n            if (notification.actionId === 'view' && firebase) {  // TODO: ENVIAR DATOS A FIREBASE, PARA QUE CUANDO SE CARGUE LA PAGINA YA EST CARGADO LOS DATOS\n                this.firebaseAppService.requestsFromLocalNotification(data, type);\n                this.removeAllListen();\n            }\n\n            if (notification.actionId === 'view' && !firebase) {\n               // this.router.navigateByUrl(`/${route}`);\n              //  this.removeAllListen();\n            }\n\n        });\n    }\n\n\n    /**\n     * Eliminar TODOS los escuchas (Listen)\n     */\n    removeAllListen() {\n        LocalNotifications.removeAllListeners();\n    }\n\n\n    /**\n     * Mostrar notificaci贸n\n     * @param datos de notificaci贸n\n     */\n    async showNotification(data: DataNotification) {\n        await LocalNotifications.schedule({\n            notifications: [\n                {\n                    title: data.title,\n                    body: data.message,\n                    id: 1,\n                    actionTypeId: data.buttonsNotification.types[0].id,\n                    attachments: [\n                        {\n                            id: 'face',\n                            url: `res://public/assets/notifications/${data.type}.jpg`\n                        }\n                    ]\n                }\n            ]\n        });\n    }\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { AlertController } from '@ionic/angular';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ModalService {\n\n  constructor(public alertController: AlertController) { }\n\n  /**\n   * Mostrar modal\n   * @param header t铆tulo de la cabecera del modal\n   * @param message mensaje del modal\n   */\n  async showModal(header: string, message: string) {\n    const alert = await this.alertController.create({\n        cssClass: 'my-custom-class', // !cambiar\n        header,\n        message,\n        backdropDismiss: false,\n        buttons: ['OK']\n      });\n    await alert.present();\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from './home.page';\nimport { CommonModule } from '@angular/common';\nimport { SharedModule } from 'app/shared/shared.module';\n\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n    children: [\n      {\n        path: '',\n        loadChildren: () => import('app/views/pages/news/news.module').then(m => m.NewsPageModule)\n      },\n      {\n        path: 'team',\n        loadChildren: () => import('app/views/pages/team/team.module').then(m => m.TeamPageModule)\n      },\n      {\n        path: 'news',\n        loadChildren: () => import('app/views/pages/news/news.module').then(m => m.NewsPageModule)\n      },\n    ]\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SharedModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule { }\n","export default \"@charset \\\"UTF-8\\\";\\nion-tab-bar {\\n  --background: var(--ion-color-primary);\\n  --color: var(--ion-color-primary-contrast );\\n}\\nion-tab-button {\\n  --color-selected: var(--ion-color-primary-contrast );\\n}\\n/**\\n* TODO: FIX COLOR DEL BOTON DE ATRS HEADER - REVISAR\\n*/\\nion-back-button {\\n  --color: var(--ion-color-primary-contrast ) !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvaG9tZS9ob21lLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0I7QUFDaEI7RUFDRSxzQ0FBQTtFQUNBLDJDQUFBO0FBQ0Y7QUFFQTtFQUNFLG9EQUFBO0FBQ0Y7QUFFQTs7Q0FBQTtBQUdBO0VBQ0Usc0RBQUE7QUFDRiIsImZpbGUiOiJzcmMvYXBwL3ZpZXdzL2hvbWUvaG9tZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcbmlvbi10YWItYmFyIHtcbiAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeSk7XG4gIC0tY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LWNvbnRyYXN0ICk7XG59XG5cbmlvbi10YWItYnV0dG9uIHtcbiAgLS1jb2xvci1zZWxlY3RlZDogdmFyKC0taW9uLWNvbG9yLXByaW1hcnktY29udHJhc3QgKTtcbn1cblxuLyoqXG4qIFRPRE86IEZJWCBDT0xPUiBERUwgQk9UT04gREUgQVRSw4FTIEhFQURFUiAtIFJFVklTQVJcbiovXG5pb24tYmFjay1idXR0b24ge1xuICAtLWNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeS1jb250cmFzdCApICFpbXBvcnRhbnQ7XG59XG5cblxuXG5cbiJdfQ== */\";","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { LoginService } from '@core/services/login.service';\nimport { faUsers, faCalendarAlt, faNewspaper, faEllipsisH } from '@fortawesome/free-solid-svg-icons';\nimport { SidebarMenuComponent } from 'app/shared/components/sidebar-menu/sidebar-menu.component';\nimport { BeaconsService } from '@core/services/beacons.service';\nimport { LocalNotificationService } from '@core/services/localNotification.service';\nimport * as datos from 'app/shared/mock/beacons.mock.json';\nimport { BeaconInfo } from '@core/models/iBeaconModel';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.page.html',\n  styleUrls: ['./home.page.scss'],\n})\nexport class HomePage implements OnInit {\n\n  icons = {\n    newspaper: faNewspaper,\n    matches: faCalendarAlt,\n    team: faUsers,\n    more: faEllipsisH\n  };\n\n  beacons: Array<BeaconInfo> = (datos as any).default;\n\n  @ViewChild('menu') sideBar: SidebarMenuComponent;\n\n  constructor(\n    public readonly loginService: LoginService,\n    public readonly beaconService: BeaconsService,\n    private localNotificationService: LocalNotificationService) {\n  }\n\n  async ngOnInit() {\n     await this.beaconService.isEnabledLocation();\n     await this.beaconService.isEnabledBluetooth();\n     await this.localNotificationService.isEnabledNotifications();\n     await this.beacons.forEach( async item => {\n        await this.beaconService.startSearchOfBeacons(item);\n     });\n  }\n\n  /**\n   * Cerrar menu lateral\n   */\n  openSideBar() {\n    this.sideBar.openSideBar();\n  }\n}\n"],"sourceRoot":"webpack:///"}