{"version":3,"sources":["webpack:///src/app/views/home/home.page.html","webpack:///src/app/core/services/beacons.service.ts","webpack:///src/app/core/services/localNotification.service.ts","webpack:///src/app/core/services/modal.service.ts","webpack:///src/app/views/home/home.module.ts","webpack:///src/app/views/home/home.page.scss","webpack:///src/app/views/home/home.page.ts"],"names":["BeaconsService","ibeacon","platform","modalService","firebaseService","localNotificationService","is","requestAlwaysAuthorization","getAuthorizationStatus","then","res","authorizationStatus","showModal","isBluetoothEnabled","statusBluetooth","beacon","delegate","Delegate","controlAuthorizationStatus","rangeBeaconsInRegion","startMonitoringForRegion","enterRegion","beaconRegion","BeaconRegion","identifier","uuid","major","minor","startMonitoringRegion","didChangeAuthorizationStatus","subscribe","data","console","log","isEnabledLocation","error","didRangeBeaconsInRegion","didStartMonitoringForRegion","didEnterRegion","sendNotification","region","stopMonitoringForRegion","getFoodOffer","res1","notifications","getShopTicketsOffer","res2","getDataContestDrawForNotification","d","activateListen","payload","customButtons","buttonsNotification","showNotification","getPolls","res4","result","typeBeacon","firebase","forEach","item","push","doc","num","length","providedIn","LocalNotifications","LocalNotificationService","firebaseAppService","requestPermission","buttonsData","registerActionTypes","type","addListener","notification","actionId","requestsFromLocalNotification","removeAllListen","removeAllListeners","schedule","title","body","message","id","actionTypeId","types","attachments","url","ModalService","alertController","header","create","cssClass","backdropDismiss","buttons","alert","present","routes","path","component","children","loadChildren","m","NewsPageModule","TeamPageModule","HomePageModule","imports","forChild","declarations","HomePage","loginService","beaconService","icons","newspaper","matches","team","more","beacons","isEnabledBluetooth","isEnabledNotifications","startSearchOfBeacons","sideBar","openSideBar","selector","template"],"mappings":"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","file":"views-home-home-module-es5.js","sourcesContent":["export default \"\\n<app-sidebar-menu #menu></app-sidebar-menu>\\n\\n<ion-tabs>\\n  <ion-tab-bar slot=\\\"bottom\\\">\\n    <ion-tab-button tab=\\\"news\\\">\\n      <fa-icon [icon]=\\\"icons.newspaper\\\"></fa-icon>\\n      <ion-label>Noticias</ion-label>\\n    </ion-tab-button>\\n\\n    <ion-tab-button tab=\\\"matches\\\">\\n      <fa-icon [icon]=\\\"icons.matches\\\"></fa-icon>\\n      <ion-label>Partidos</ion-label>\\n    </ion-tab-button>\\n\\n    <ion-tab-button tab=\\\"team\\\">\\n      <fa-icon [icon]=\\\"icons.team\\\"></fa-icon>\\n      <ion-label>Equipo</ion-label>\\n    </ion-tab-button>\\n\\n    <ion-tab-button (click)=\\\"openSideBar()\\\">\\n      <fa-icon [icon]=\\\"icons.more\\\"></fa-icon>\\n      <ion-label>Más</ion-label>\\n    </ion-tab-button>\\n  </ion-tab-bar>\\n</ion-tabs>\";","import { Injectable } from '@angular/core';\nimport { IBeacon } from '@ionic-native/ibeacon/ngx';\nimport { Platform } from '@ionic/angular';\nimport { ModalService } from './modal.service';\nimport { BeaconInfo } from '@core/models/iBeaconModel';\nimport { FirebaseAppService } from './firebase-app.service';\nimport { generateRandomNumber, generateDateNow } from 'app/shared/utils/functionsUtils';\nimport { LocalNotificationService } from './localNotification.service';\nimport { DataNotification } from '@core/models/localNotificationModel';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class BeaconsService {\n\n    delegate: any;\n\n    constructor(private ibeacon: IBeacon, public platform: Platform, public readonly modalService: ModalService,\n                private firebaseService: FirebaseAppService,\n                private localNotificationService: LocalNotificationService) { }\n\n\n    /**\n     * * Comprueba si se le permite acceder a localización\n     * ! iOS es necesario, en Android no hace falta\n     */\n    isEnabledLocation() {\n        if (this.platform.is('ios' || 'ipad' || 'iphone')) {\n            this.ibeacon.requestAlwaysAuthorization();\n            this.ibeacon.getAuthorizationStatus().then(res => {\n                if (res.authorizationStatus === 'AuthorizationStatusDenied') {\n                    this.modalService.showModal('Aviso', 'La Localización está desactivada. Para poder interectuar con los Beacons, es necesario activarla. Por favor, vaya Ajustes > CDTenerife > Localización y actívela.');\n                }\n            });\n        }\n    }\n\n\n    /**\n     * * Comprueba que el Bluetooth está habilitado\n     */\n    isEnabledBluetooth() {\n        this.ibeacon.isBluetoothEnabled().then(statusBluetooth => {\n            if (!statusBluetooth) {\n                this.modalService.showModal('Aviso', 'El Bluetooth está desactivado. Para poder interectuar con los Beacons, es necesario activarlo. Por favor, vaya Ajustes y actívelo.');\n            }\n        });\n    }\n\n\n    /**\n     * * Comenzar a buscar beacons\n     * - Crear nuevo delegado y lo registra con la capa activa\n     */\n    startSearchOfBeacons(beacon: BeaconInfo) {\n        this.delegate = this.ibeacon.Delegate();\n        this.controlAuthorizationStatus();\n        this.rangeBeaconsInRegion();\n        this.startMonitoringForRegion();\n        this.enterRegion();\n        const beaconRegion = this.ibeacon.BeaconRegion(beacon.identifier, beacon.uuid, beacon.major, beacon.minor, true);\n        this.startMonitoringRegion(beaconRegion);\n    }\n\n\n    /**\n     * Control del estado de autorización, se llamada cada vez q se modifica\n     */\n    controlAuthorizationStatus() {\n        this.delegate.didChangeAuthorizationStatus()\n            .subscribe(\n                data => {\n                    console.log('🔆 didChangeAuthorizationStatus: ', data);\n                    this.isEnabledLocation();\n                },\n                error => console.error(error)\n            );\n    }\n\n\n    /**\n     * Cuando se detecta un beacon cualquiera dentro de la región.\n     */\n    rangeBeaconsInRegion() {\n        this.delegate.didRangeBeaconsInRegion()\n            .subscribe(\n                data => console.log('🔆  didRangeBeaconsInRegion: ', data), // ! a veces entra y otras veces pasa\n                error => console.error(error)\n            );\n    }\n\n\n    /**\n     * Cuando el dispositivo comienza a monitorear una región.\n     */\n    startMonitoringForRegion() {\n        this.delegate.didStartMonitoringForRegion()\n            .subscribe(\n                data => console.log('🔆  didStartMonitoringForRegion: ', data),\n                error => console.error(error)\n            );\n    }\n\n\n    /**\n     * * El dispositivo entra en la región solicitó monitorear.\n     */\n    enterRegion() {\n        this.delegate.didEnterRegion()\n            .subscribe(\n                async data => {\n                    console.log('🔆  didEnterRegion: ', data);\n                    await this.sendNotification(data);\n                    // let e = { region : { 'typeName': 'BeaconRegion', 'minor': 1, 'major': 1, 'identifier': 'Beacon Popular-Comida', 'uuid': 'B9407F30-F5F8-466E-AFF9-25556B57FE6D' }, 'eventType': 'didEnterRegion' }\n                }\n            );\n    }\n\n    /**\n     * * Comienza a monitorear una región especificada.\n     */\n    startMonitoringRegion(beacon: BeaconInfo) {\n        this.ibeacon.startMonitoringForRegion(beacon)\n            .then(\n                () => console.log(' 🔆  Native layer received the request to monitoring'),\n                error => console.error('Native layer failed to begin monitoring: ', error)\n            );\n    }\n\n\n    /**\n     * * Parar de monitorear una región especificada.\n     */\n    stopMonitoringRegion(region: BeaconInfo) {\n        this.ibeacon.stopMonitoringForRegion(region);\n    }\n\n\n\n    /**\n     * Enviar notificación dependiendo del tipo de beacon\n     * @param data datos del beacon\n     */\n    async sendNotification(data: any) {\n        switch (data.region.minor) {\n            case 1:\n                const res1 = await this.firebaseService.getFoodOffer(generateDateNow());\n                this.notifications(res1, 1, true);\n                break;\n            case 2:\n                const res2 = await this.firebaseService.getShopTicketsOffer(generateDateNow());\n                this.notifications(res2, 2, true);\n                break;\n            case 3:\n                await this.firebaseService.getDataContestDrawForNotification(generateDateNow()).then( res => {\n                    res.subscribe(async (d: any) => {\n                      this.localNotificationService.activateListen(d.payload.data(), true, 3);\n                      this.localNotificationService.customButtons(d.payload.data().buttonsNotification);\n                      this.localNotificationService.showNotification(d.payload.data());\n                    });\n                  });\n                break;\n            case 4:\n                const res4 = await this.firebaseService.getPolls(generateDateNow());\n                this.notifications(res4, 4, true);\n                break;\n            default:\n                break;\n        }\n    }\n\n\n    /**\n     * Configuraciones\n     * @param result resultados de las peticiones\n     * @param typeBeacon tipo de beacon\n     * @param firebase uso de firebase, mostra dato en la notificación de la BBDD\n     */\n    notifications(result: any, typeBeacon: number, firebase: boolean) {\n        let data: Array<DataNotification> = [];\n        result.subscribe(async (d: any) => { // ! OJO: CON EL SUBCRIBE- DESUCRBIBE\n            d.forEach(item => {\n                data.push(item.payload.doc.data());\n            });\n            const num = generateRandomNumber(data.length);\n            this.localNotificationService.activateListen(data[num], true, typeBeacon);\n            this.localNotificationService.customButtons(data[num].buttonsNotification);\n            this.localNotificationService.showNotification(data[num]);\n        });\n    }\n\n\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { ButtonsNotification, DataNotification } from '@core/models/localNotificationModel';\nimport { Plugins, LocalNotification, LocalNotificationActionPerformed } from '@capacitor/core';\nimport { FirebaseAppService } from './firebase-app.service';\nconst { LocalNotifications } = Plugins;\n\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class LocalNotificationService {\n\n\n    constructor(private firebaseAppService: FirebaseAppService) { }\n\n\n    /**\n     *  Solicitar permiso de notificaciones\n     * ! Revisar en Android\n     */\n    async isEnabledNotifications() {\n        await LocalNotifications.requestPermission();\n    }\n\n    /**\n     * Crear botones personalizados.\n     * @param buttonsData datos de los botones\n     */\n    customButtons(buttonsData: ButtonsNotification) {\n        LocalNotifications.registerActionTypes(buttonsData);\n    }\n\n\n    /**\n     * Activar escucha (Listen)\n     * @param firebase si va hacer una petición a la BBDD\n     * @param data datos\n     */\n    activateListen(data: any, firebase: boolean, type: number) {\n        LocalNotifications.addListener('localNotificationActionPerformed', (notification: LocalNotificationActionPerformed) => {\n            console.log('Pulsar: ', notification.actionId);\n\n            if (notification.actionId === 'view' && firebase) {  // TODO: ENVIAR DATOS A FIREBASE, PARA QUE CUANDO SE CARGUE LA PAGINA YA ESTÉ CARGADO LOS DATOS\n                this.firebaseAppService.requestsFromLocalNotification(data, type);\n                this.removeAllListen();\n            }\n\n            if (notification.actionId === 'view' && !firebase) {\n               // this.router.navigateByUrl(`/${route}`);\n              //  this.removeAllListen();\n            }\n\n        });\n    }\n\n\n    /**\n     * Eliminar TODOS los escuchas (Listen)\n     */\n    removeAllListen() {\n        LocalNotifications.removeAllListeners();\n    }\n\n\n    /**\n     * Mostrar notificación\n     * @param datos de notificación\n     */\n    async showNotification(data: DataNotification) {\n        await LocalNotifications.schedule({\n            notifications: [\n                {\n                    title: data.title,\n                    body: data.message,\n                    id: 1,\n                    actionTypeId: data.buttonsNotification.types[0].id,\n                    attachments: [\n                        {\n                            id: 'face',\n                            url: `res://public/assets/notifications/${data.type}.jpg`\n                        }\n                    ]\n                }\n            ]\n        });\n    }\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { AlertController } from '@ionic/angular';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ModalService {\n\n  constructor(public alertController: AlertController) { }\n\n  /**\n   * Mostrar modal\n   * @param header título de la cabecera del modal\n   * @param message mensaje del modal\n   */\n  async showModal(header: string, message: string) {\n    const alert = await this.alertController.create({\n        cssClass: 'my-custom-class', // !cambiar\n        header,\n        message,\n        backdropDismiss: false,\n        buttons: ['OK']\n      });\n    await alert.present();\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from './home.page';\nimport { CommonModule } from '@angular/common';\nimport { SharedModule } from 'app/shared/shared.module';\n\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n    children: [\n      {\n        path: '',\n        loadChildren: () => import('app/views/pages/news/news.module').then(m => m.NewsPageModule)\n      },\n      {\n        path: 'team',\n        loadChildren: () => import('app/views/pages/team/team.module').then(m => m.TeamPageModule)\n      },\n      {\n        path: 'news',\n        loadChildren: () => import('app/views/pages/news/news.module').then(m => m.NewsPageModule)\n      },\n    ]\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SharedModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule { }\n","export default \"@charset \\\"UTF-8\\\";\\nion-tab-bar {\\n  --background: var(--ion-color-primary);\\n  --color: var(--ion-color-primary-contrast );\\n}\\nion-tab-button {\\n  --color-selected: var(--ion-color-primary-contrast );\\n}\\n/**\\n* TODO: FIX COLOR DEL BOTON DE ATRÁS HEADER - REVISAR\\n*/\\nion-back-button {\\n  --color: var(--ion-color-primary-contrast ) !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvaG9tZS9ob21lLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0I7QUFDaEI7RUFDRSxzQ0FBQTtFQUNBLDJDQUFBO0FBQ0Y7QUFFQTtFQUNFLG9EQUFBO0FBQ0Y7QUFFQTs7Q0FBQTtBQUdBO0VBQ0Usc0RBQUE7QUFDRiIsImZpbGUiOiJzcmMvYXBwL3ZpZXdzL2hvbWUvaG9tZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcbmlvbi10YWItYmFyIHtcbiAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeSk7XG4gIC0tY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LWNvbnRyYXN0ICk7XG59XG5cbmlvbi10YWItYnV0dG9uIHtcbiAgLS1jb2xvci1zZWxlY3RlZDogdmFyKC0taW9uLWNvbG9yLXByaW1hcnktY29udHJhc3QgKTtcbn1cblxuLyoqXG4qIFRPRE86IEZJWCBDT0xPUiBERUwgQk9UT04gREUgQVRSw4FTIEhFQURFUiAtIFJFVklTQVJcbiovXG5pb24tYmFjay1idXR0b24ge1xuICAtLWNvbG9yOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeS1jb250cmFzdCApICFpbXBvcnRhbnQ7XG59XG5cblxuXG5cbiJdfQ== */\";","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { LoginService } from '@core/services/login.service';\nimport { faUsers, faCalendarAlt, faNewspaper, faEllipsisH } from '@fortawesome/free-solid-svg-icons';\nimport { SidebarMenuComponent } from 'app/shared/components/sidebar-menu/sidebar-menu.component';\nimport { BeaconsService } from '@core/services/beacons.service';\nimport { LocalNotificationService } from '@core/services/localNotification.service';\nimport * as datos from 'app/shared/mock/beacons.mock.json';\nimport { BeaconInfo } from '@core/models/iBeaconModel';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.page.html',\n  styleUrls: ['./home.page.scss'],\n})\nexport class HomePage implements OnInit {\n\n  icons = {\n    newspaper: faNewspaper,\n    matches: faCalendarAlt,\n    team: faUsers,\n    more: faEllipsisH\n  };\n\n  beacons: Array<BeaconInfo> = (datos as any).default;\n\n  @ViewChild('menu') sideBar: SidebarMenuComponent;\n\n  constructor(\n    public readonly loginService: LoginService,\n    public readonly beaconService: BeaconsService,\n    private localNotificationService: LocalNotificationService) {\n  }\n\n  async ngOnInit() {\n     await this.beaconService.isEnabledLocation();\n     await this.beaconService.isEnabledBluetooth();\n     await this.localNotificationService.isEnabledNotifications();\n     await this.beacons.forEach( async item => {\n        await this.beaconService.startSearchOfBeacons(item);\n     });\n  }\n\n  /**\n   * Cerrar menu lateral\n   */\n  openSideBar() {\n    this.sideBar.openSideBar();\n  }\n}\n"]}