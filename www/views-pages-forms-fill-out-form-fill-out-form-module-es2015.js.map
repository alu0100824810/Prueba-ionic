{"version":3,"sources":["./src/app/views/pages/forms/fill-out-form/fill-out-form.page.html","./src/app/views/pages/forms/fill-out-form/fill-out-form.module.ts","./src/app/views/pages/forms/fill-out-form/fill-out-form.page.scss","./src/app/views/pages/forms/fill-out-form/fill-out-form.page.ts"],"names":[],"mappings":"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","file":"views-pages-forms-fill-out-form-fill-out-form-module-es2015.js","sourcesContent":["export default \"<app-header [showBackButton]=\\\"true\\\" name=\\\"Encuesta\\\"></app-header>\\n\\n<ion-content class=\\\"ion-padding\\\" *ngIf=\\\"form !== undefined\\\">\\n    <div class=\\\"sub-header\\\">\\n      <p>ENCUESTA</p>\\n      <p class=\\\"ion-text-capitalize\\\">{{infoService.category}} {{infoService.dateToday}} </p>\\n    </div>\\n  <ng-container *ngFor=\\\"let item of data\\\">\\n    <br>\\n    <ion-radio-group value=\\\"item.value\\\" [(ngModel)]=\\\"item.value\\\">\\n      <ion-label class=\\\"question\\\">{{item.question}}</ion-label>\\n      <ion-grid class=\\\"ion-text-center\\\">\\n        <ion-row>\\n          <ion-col size=\\\"2\\\" *ngFor=\\\"let value of [].constructor(6); let i = index\\\" (click)=\\\"onClick(event)\\\">\\n            <ion-label>{{i+1}}</ion-label>\\n          </ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col size=\\\"2\\\" *ngFor=\\\"let value of [].constructor(6); let i = index\\\">\\n            <ion-radio value={{i+1}} mode=\\\"md\\\"></ion-radio>\\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n    </ion-radio-group>\\n    <br>\\n  </ng-container>\\n\\n  <br>\\n  <div class=\\\"button-send\\\">\\n    <ion-button (click)=\\\"sendAnswersForms()\\\" fill=\\\"outline\\\" shape=\\\"round\\\">\\n      Enviar\\n    </ion-button>\\n  </div>\\n\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FillOutFormPage } from './fill-out-form.page';\nimport { RouterModule, Routes } from '@angular/router';\nimport { SharedModule } from 'app/shared/shared.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FillOutFormPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SharedModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [FillOutFormPage]\n})\nexport class FillOutFormPageModule {}\n","export default \".sub-header p:nth-child(1) {\\n  font-weight: bold;\\n}\\n\\n.question {\\n  --color: #262626;\\n  position: relative;\\n  font-size: 12px;\\n  font-weight: 500;\\n  letter-spacing: 1px;\\n  text-transform: uppercase;\\n}\\n\\n.button-send {\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n.button-send ion-button {\\n  --background: var(--ion-color-primary);\\n  color: var(--ion-color-primary-contrast);\\n}\\n\\nion-radio {\\n  width: 28px;\\n  height: 28px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvcGFnZXMvZm9ybXMvZmlsbC1vdXQtZm9ybS9maWxsLW91dC1mb3JtLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFSTtFQUNJLGlCQUFBO0FBRFI7O0FBTUE7RUFDSSxnQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7RUFDQSx5QkFBQTtBQUhKOztBQU1BO0VBQ0ksYUFBQTtFQUNBLHVCQUFBO0FBSEo7O0FBS0k7RUFDSSxzQ0FBQTtFQUNBLHdDQUFBO0FBSFI7O0FBUUE7RUFDSSxXQUFBO0VBQ0EsWUFBQTtBQUxKIiwiZmlsZSI6InNyYy9hcHAvdmlld3MvcGFnZXMvZm9ybXMvZmlsbC1vdXQtZm9ybS9maWxsLW91dC1mb3JtLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5zdWItaGVhZGVye1xuXG4gICAgcDpudGgtY2hpbGQoMSl7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIH1cbn1cblxuXG4ucXVlc3Rpb24ge1xuICAgIC0tY29sb3I6ICMyNjI2MjY7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGxldHRlci1zcGFjaW5nOiAxcHg7XG4gICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbn1cblxuLmJ1dHRvbi1zZW5ke1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgXG4gICAgaW9uLWJ1dHRvbiB7XG4gICAgICAgIC0tYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnktY29udHJhc3QgKTtcbiAgICB9XG59XG5cblxuaW9uLXJhZGlvIHtcbiAgICB3aWR0aDogMjhweDtcbiAgICBoZWlnaHQ6IDI4cHg7XG59Il19 */\";","import { Component, OnInit } from '@angular/core';\nimport { FormInfo } from 'app/shared/models/FormModel';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { MessagesService } from '@core/services/messages.service';\nimport { FirebaseAppService } from '@core/services/firebase-app.service';\nimport { LoginService } from '@core/services/login.service';\nimport { AlertController, NavController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-fill-out-form',\n  templateUrl: './fill-out-form.page.html',\n  styleUrls: ['./fill-out-form.page.scss'],\n})\nexport class FillOutFormPage implements OnInit {\n\n  infoService = {\n    category: '',\n    dateToday: '',\n    uid: ''\n  };\n\n  form: FormInfo;\n  data = [];\n\n  constructor(\n    private firebaseAppService: FirebaseAppService,\n    private readonly activatedRoute: ActivatedRoute,\n    private messages: MessagesService,\n    private readonly loginService: LoginService,\n    public alertController: AlertController,\n    private router: Router,\n    private navCtrl: NavController) {\n    this.getData();\n  }\n\n  ngOnInit() {}\n\n  /**\n   * IMPORTAR FORMULARIO\n   */\n  async getData() {   // TODO: FECHA PRUEBA\n    try {\n      await this.messages.showSpinner('Cargando...');\n      const MyDate = new Date();\n      this.infoService.dateToday = ('0' + MyDate.getDate()).slice(-2) + '-' + ('0' + (MyDate.getMonth() + 1)).slice(-2) + '-' + MyDate.getFullYear();\n      this.infoService.category = this.activatedRoute.snapshot.params.category;\n      this.infoService.uid = this.loginService.user.uid;\n      const result = await this.firebaseAppService.getFormByID(this.infoService.category, '27-07-2020', this.infoService.uid);\n      result.subscribe((res: any) => {\n        this.form = res.payload.data();\n        const r: FormInfo = JSON.parse(JSON.stringify(this.form));\n        r.data.forEach(item => {\n          this.data.push(item);\n        });\n      });\n    } catch (error) {\n      console.error(error);\n      await this.messages.hideSpinner();\n      await this.showAlertError('No se ha podido obtener los datos del formulario.');\n      this.form = null;\n      this.data = [];\n    } finally {\n      await this.messages.hideSpinner();\n    }\n  }\n\n\n\n  /**\n   * ENVIAR FORMULARIO CON RESPUESTAS\n   */\n  async sendAnswersForms() {\n    let copyData = JSON.parse(JSON.stringify(this.data)); // ! OJO Si se está usando ecmascript5 la COPIA del ARRAY es así, si es6 es asi [...dataArray]\n    copyData.map(x => {\n      x.value = +x.value;\n      return x;\n    });\n    this.form.data = [...copyData];\n    this.form.info.done = true;\n    try {\n      await this.messages.showSpinner('Enviado respuestas...');\n      await this.firebaseAppService.postFormAnswers(this.infoService.category, '27-07-2020', this.infoService.uid, this.form);\n      await this.messages.showToast('Formulario enviado correctamente');\n      this.data = null;\n      this.form = null;\n      await this.router.navigateByUrl('/category-forms');\n    } catch (error) {\n      await this.messages.hideSpinner();\n      console.error(error);\n      copyData = null;\n      await this.showAlertError('No se ha podido enviar las respuestas.'); // TODO: MEJORA -> Si da error no volver atrás, sino dar la opción de volver intentarlo\n    } finally {\n      await this.messages.hideSpinner();\n    }\n  }\n\n\n\n  /**\n   * Mostrar mensaje de error\n   * @param message mensaje de error\n   */\n  async showAlertError(message: string) {\n    const alert = await this.alertController.create({\n      cssClass: 'alert-error',\n      header: 'Error',\n      message,\n      backdropDismiss: false, // TODO: PROVISIONAL\n      buttons: [ // TODO: AÑADIR BOTÓN INTENTAR DE NUEVO\n        {\n          text: 'Atrás',\n          cssClass: 'secondary',\n          handler: () => {\n            this.navCtrl.back();\n          }\n        }\n      ]\n    });\n    await alert.present();\n  }\n\n\n  onClick(e) {\n    console.log('item', e);\n  }\n}\n"],"sourceRoot":"webpack:///"}